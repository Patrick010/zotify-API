**NOTE: This is a mandatory pre-submit checklist. All applicable steps must be verified before your work is considered complete.**

---

### A. For ALL Changes (including documentation)

#### 1. Task Qualification
- [ ] **Task Readiness Verification:** Manually confirm the task conforms to the template in `BACKLOG.md` and meets all readiness criteria in `PID.md` before starting work.

#### 2. Documentation — Mandatory & Verifiable
- [ ] Have all relevant documentation files, identified by consulting the `PROJECT_REGISTRY.md`, been updated to reflect the changes made?
- [ ] Have the changes been cross-referenced in the `TRACEABILITY_MATRIX.md` or other relevant tracking documents?
- [ ] Does the commit message clearly explain the "what" and the "why"?
- [ ] **HLD & LLD**: Update or create high-level and low-level design docs if implementation deviates from specs. Include clear architectural change summaries.
- [ ] **Roadmap**: Update `project/ROADMAP.md` or equivalent if timelines, scope, or priorities change.
- [ ] **User & Operator Guides**: Update `developer_guide.md`, `operator_guide.md`, and related manuals for all functional changes, including API examples.
- [ ] **CHANGELOG**: Add entries reflecting **all** functional changes: new/modified/removed endpoints, param changes, behavioral changes.
- [ ] For traceability, all documentation changes must be included in the same commit as the code changes they relate to.
- [ ] Document all functional changes in every relevant doc: API reference, developer/operator guides, README if user-facing. Include before/after request/response examples and behavior notes.

#### 3. Process & Workflow
- [ ] Include **explicit approval steps** (code reviews, security/privacy sign-offs) if your project workflow requires them.
- [ ] Follow a **clear branching and release process** if it can be fully automated as part of the task execution.

---

### B. ONLY If Code Was Modified

#### 1. Security
- [ ] Review code changes for **security risks**: injection, data leaks, improper authentication, unsafe file handling.
- [ ] Ensure **admin API key handling** complies with the project's established security policies.
- [ ] Confirm **least-privilege principle** is applied for endpoints, data access, and dependencies.
- [ ] Add or update **`project/SECURITY.md`** with any new security considerations.
- [ ] Verify any new dependencies or third-party components are vetted for security and properly licensed.

#### 2. Privacy
- [ ] Review code changes for **privacy compliance** (GDPR, CCPA, or other applicable regulations).
- [ ] Confirm sensitive data is **minimized**, **encrypted** where needed, and **never logged in plain text**.
- [ ] Update **`api/docs/system/PRIVACY_COMPLIANCE.md`** reflecting new privacy impacts and controls.
- [ ] Enforce user data rights: consent capture, data export, deletion, correction, and withdrawal mechanisms.
- [ ] Extend audit logging to track all personal data access and changes securely.
- [ ] Integrate privacy by design and default into the task's implementation.

#### 3. Code Quality
- [ ] Follow established **naming conventions**, directory structures, and coding style guides strictly.
- [ ] Maintain strict **modularity** — separate concerns cleanly, avoid cross-layer leakage (e.g., CLI logic leaking into API layer).
- [ ] Ensure complete and correct **type hints** and **docstrings** for all functions, classes, and modules.
- [ ] Perform **code reviews** with a focus on readability, maintainability, performance, and security.
- [ ] Consider efficiency, scalability, and resource usage when writing or modifying code.
- [ ] Refactor legacy or autogenerated code as needed to meet these quality standards.

#### 4. Tests
- [ ] Have the relevant unit or integration tests been run and confirmed to pass?
- [ ] Have new tests been added to cover the changes?
- [ ] For security- or privacy-sensitive features, write **negative tests** simulating invalid inputs, unauthorized access, or malformed data.

---

### C. Formal Code Review Checklist
This checklist is for the reviewer to ensure all changes meet project standards before approval.

#### 1. Design & Architecture
- [ ] **Alignment:** Does the change align with the project's HLD and LLD? If there's a deviation, is it justified and documented?
- [ ] **Modularity:** Is the code well-structured with a clear separation of concerns? Does it avoid leaking logic between layers?
- [ ] **Scalability:** Has the potential performance impact of the change been considered?

#### 2. Code Quality & Readability
- [ ] **Clarity:** Is the code clear, concise, and easy to understand? Are variable and function names descriptive?
- [ ] **Style:** Does the code adhere to the project's coding style (PEP 8, `black`, `ruff`)?
- [ ] **Type Hints:** Are all functions, variables, and classes properly type-hinted?
- [ ] **Docstrings:** Are all public modules, classes, and functions documented with clear docstrings?

#### 3. Security & Privacy
- [ ] **Security Risks:** Have common security risks (e.g., injection, XSS, unsafe deserialization) been considered and mitigated?
- [ ] **Data Handling:** Is sensitive data handled correctly? Is it minimized, redacted from logs, and encrypted where necessary?
- [ ] **Dependencies:** Do new dependencies come from trusted sources and are they free of known critical vulnerabilities?

#### 4. Testing
- [ ] **Test Coverage:** Are the changes covered by new or existing tests? Is the coverage sufficient?
- [ ] **Test Quality:** Do tests correctly verify the new functionality, including edge cases and negative paths?
- [ ] **CI Pass:** Has the full CI pipeline (test, lint, type-check, security-scan) passed for the changes?

#### 5. Documentation (Living Documentation Principle)
- [ ] **Completeness:** Have all relevant documents (`API_REFERENCE.md`, guides, manuals, etc.) been updated to reflect the change?
- [ ] **Clarity:** Is the documentation clear, accurate, and easy for the target audience to understand?
- [ ] **Traceability:** Is the change correctly reflected in the `TRACEABILITY_MATRIX.md` or other relevant tracking documents?

---

### D. Code Review Scoring Rubric
**Process:** The reviewer should complete the checklist in section C and leave a final score (A, B, or C) as a top-level comment on the Pull Request. The follow-up actions for each score are defined below.

After completing the review checklist, provide a summary score to gauge overall quality and required actions.

- **A (Excellent):**
  - The code not only meets all checklist criteria but also demonstrates exceptional clarity, efficiency, and forward-thinking design.
  - No further changes are required. **Action: Approve.**

- **B (Good):**
  - The code meets all critical requirements from the checklist.
  - Minor, non-blocking suggestions for improvement (e.g., style nits, comment clarifications) may be offered but are not required for approval.
  - **Action: Approve.** (Optionally, the author can address minor suggestions in a follow-up.)

- **C (Needs Improvement):**
  - The code fails to meet one or more critical requirements from the checklist (e.g., has a potential security risk, lacks necessary tests, is unclear, or deviates from the design without justification).
  - **Action: Request Changes.** The reviewer must provide clear, actionable feedback on which checklist items must be addressed.

---

**Enforcement:**
No task is considered complete unless all applicable checklist items have been addressed. This file is authoritative and version-controlled.

---

**Notes on Privacy Compliance (Integrated)**
Privacy compliance is an integral part of every task, not a separate addendum. Ensure:
- User consent is captured and stored where relevant.
- API endpoints exposing personal data must be designed to accommodate future RBAC and access controls.
- Data minimization, encryption, and audit logging are applied consistently.
- User rights such as data export, deletion, and correction are implemented and tested.
- All privacy-related documentation is updated as part of normal doc maintenance.